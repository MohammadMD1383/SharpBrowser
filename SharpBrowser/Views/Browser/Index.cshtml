@using static System.IO.Path
@model BrowserViewModel

<header>
	<a href="/">ROOT</a>
	@for (var i = 0; i < Model.Path.Length; i++) {
		var p = Model.Path[i];
		var href = Combine(Model.Root, string.Join("/", Model.Path.Take(i + 1)));
		<span>></span>
		<a asp-action="Index" asp-route-path="@href">@p</a>
	}
</header>

<table>
	<thead>
		<tr>
			<th>Name</th>
			<th>Size</th>
			<th>Action</th>
		</tr>
	</thead>

	<tbody>
		@foreach (var dir in Model.Directories) {
			<tr>
				<td>
					<a asp-action="Index" asp-route-path="@dir.FullPath">@dir.Path/</a>
				</td>
				<td>-</td>
				<td>
					<a asp-action="Download" asp-route-path="@dir.FullPath">Download</a>
				</td>
			</tr>
		}

		@foreach (var file in Model.Files) {
			<tr>
				<td>
					<a asp-action="ViewFile" asp-route-path="@file.FullPath">@file.Path</a>
				</td>
				<td>@file.HumanReadableSize()</td>
				<td>
					<a asp-action="Download" asp-route-path="@file.FullPath">Download</a>
				</td>
			</tr>
		}
	</tbody>
</table>